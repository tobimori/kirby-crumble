<script setup>
defineProps({
	value: String
})

// map country codes to flag emojis
const FLAGS = {
	// europe
	'de': 'ğŸ‡©ğŸ‡ª',
	'fr': 'ğŸ‡«ğŸ‡·',
	'gb': 'ğŸ‡¬ğŸ‡§',
	'uk': 'ğŸ‡¬ğŸ‡§',
	'es': 'ğŸ‡ªğŸ‡¸',
	'it': 'ğŸ‡®ğŸ‡¹',
	'nl': 'ğŸ‡³ğŸ‡±',
	'be': 'ğŸ‡§ğŸ‡ª',
	'ch': 'ğŸ‡¨ğŸ‡­',
	'at': 'ğŸ‡¦ğŸ‡¹',
	'pl': 'ğŸ‡µğŸ‡±',
	'cz': 'ğŸ‡¨ğŸ‡¿',
	'dk': 'ğŸ‡©ğŸ‡°',
	'se': 'ğŸ‡¸ğŸ‡ª',
	'no': 'ğŸ‡³ğŸ‡´',
	'fi': 'ğŸ‡«ğŸ‡®',
	'pt': 'ğŸ‡µğŸ‡¹',
	'gr': 'ğŸ‡¬ğŸ‡·',
	'ie': 'ğŸ‡®ğŸ‡ª',
	'hu': 'ğŸ‡­ğŸ‡º',
	'ro': 'ğŸ‡·ğŸ‡´',
	'bg': 'ğŸ‡§ğŸ‡¬',
	'hr': 'ğŸ‡­ğŸ‡·',
	'sk': 'ğŸ‡¸ğŸ‡°',
	'si': 'ğŸ‡¸ğŸ‡®',
	'lt': 'ğŸ‡±ğŸ‡¹',
	'lv': 'ğŸ‡±ğŸ‡»',
	'ee': 'ğŸ‡ªğŸ‡ª',
	'lu': 'ğŸ‡±ğŸ‡º',
	'mt': 'ğŸ‡²ğŸ‡¹',
	'cy': 'ğŸ‡¨ğŸ‡¾',
	
	// americas
	'us': 'ğŸ‡ºğŸ‡¸',
	'ca': 'ğŸ‡¨ğŸ‡¦',
	'mx': 'ğŸ‡²ğŸ‡½',
	'br': 'ğŸ‡§ğŸ‡·',
	'ar': 'ğŸ‡¦ğŸ‡·',
	'cl': 'ğŸ‡¨ğŸ‡±',
	'co': 'ğŸ‡¨ğŸ‡´',
	'pe': 'ğŸ‡µğŸ‡ª',
	've': 'ğŸ‡»ğŸ‡ª',
	'uy': 'ğŸ‡ºğŸ‡¾',
	'py': 'ğŸ‡µğŸ‡¾',
	'bo': 'ğŸ‡§ğŸ‡´',
	'ec': 'ğŸ‡ªğŸ‡¨',
	'cr': 'ğŸ‡¨ğŸ‡·',
	'pa': 'ğŸ‡µğŸ‡¦',
	'cu': 'ğŸ‡¨ğŸ‡º',
	'do': 'ğŸ‡©ğŸ‡´',
	'gt': 'ğŸ‡¬ğŸ‡¹',
	'hn': 'ğŸ‡­ğŸ‡³',
	'ni': 'ğŸ‡³ğŸ‡®',
	'sv': 'ğŸ‡¸ğŸ‡»',
	
	// asia pacific
	'cn': 'ğŸ‡¨ğŸ‡³',
	'jp': 'ğŸ‡¯ğŸ‡µ',
	'kr': 'ğŸ‡°ğŸ‡·',
	'in': 'ğŸ‡®ğŸ‡³',
	'au': 'ğŸ‡¦ğŸ‡º',
	'nz': 'ğŸ‡³ğŸ‡¿',
	'sg': 'ğŸ‡¸ğŸ‡¬',
	'my': 'ğŸ‡²ğŸ‡¾',
	'id': 'ğŸ‡®ğŸ‡©',
	'th': 'ğŸ‡¹ğŸ‡­',
	'ph': 'ğŸ‡µğŸ‡­',
	'vn': 'ğŸ‡»ğŸ‡³',
	'hk': 'ğŸ‡­ğŸ‡°',
	'tw': 'ğŸ‡¹ğŸ‡¼',
	'pk': 'ğŸ‡µğŸ‡°',
	'bd': 'ğŸ‡§ğŸ‡©',
	'lk': 'ğŸ‡±ğŸ‡°',
	
	// middle east & africa
	'ae': 'ğŸ‡¦ğŸ‡ª',
	'sa': 'ğŸ‡¸ğŸ‡¦',
	'eg': 'ğŸ‡ªğŸ‡¬',
	'za': 'ğŸ‡¿ğŸ‡¦',
	'ng': 'ğŸ‡³ğŸ‡¬',
	'ke': 'ğŸ‡°ğŸ‡ª',
	'ma': 'ğŸ‡²ğŸ‡¦',
	'il': 'ğŸ‡®ğŸ‡±',
	'tr': 'ğŸ‡¹ğŸ‡·',
	'qa': 'ğŸ‡¶ğŸ‡¦',
	'kw': 'ğŸ‡°ğŸ‡¼',
	'bh': 'ğŸ‡§ğŸ‡­',
	'om': 'ğŸ‡´ğŸ‡²',
	'jo': 'ğŸ‡¯ğŸ‡´',
	'lb': 'ğŸ‡±ğŸ‡§',
	'tn': 'ğŸ‡¹ğŸ‡³',
	'dz': 'ğŸ‡©ğŸ‡¿',
	'et': 'ğŸ‡ªğŸ‡¹',
	'gh': 'ğŸ‡¬ğŸ‡­',
	'ug': 'ğŸ‡ºğŸ‡¬',
	'tz': 'ğŸ‡¹ğŸ‡¿',
	
	// other
	'ru': 'ğŸ‡·ğŸ‡º',
	'ua': 'ğŸ‡ºğŸ‡¦',
	'by': 'ğŸ‡§ğŸ‡¾',
	'kz': 'ğŸ‡°ğŸ‡¿',
	'uz': 'ğŸ‡ºğŸ‡¿',
	'ge': 'ğŸ‡¬ğŸ‡ª',
	'am': 'ğŸ‡¦ğŸ‡²',
	'az': 'ğŸ‡¦ğŸ‡¿',
	'is': 'ğŸ‡®ğŸ‡¸',
	'al': 'ğŸ‡¦ğŸ‡±',
	'ba': 'ğŸ‡§ğŸ‡¦',
	'rs': 'ğŸ‡·ğŸ‡¸',
	'me': 'ğŸ‡²ğŸ‡ª',
	'mk': 'ğŸ‡²ğŸ‡°',
	'md': 'ğŸ‡²ğŸ‡©'
}

// get flag emoji or fallback to globe
const getFlag = (code) => {
	if (!code) return 'ğŸŒ'
	const lowerCode = code.toLowerCase()
	return FLAGS[lowerCode] || 'ğŸŒ'
}
</script>

<template>
	<span
		class="k-crumble-country-preview k-text-field-preview"
		:data-country="value"
		:title="value ? value.toUpperCase() : ''"
	>
		<span class="k-crumble-country-preview-flag">
			{{ getFlag(value) }}
		</span>
		<span class="k-crumble-country-preview-code">
			{{ value ? value.toUpperCase() : 'â€”' }}
		</span>
	</span>
</template>

<style>
.k-crumble-country-preview {
	display: inline-flex;
	align-items: center;
	gap: 0.375rem;
}

.k-crumble-country-preview-flag {
	font-size: 1.125rem;
	line-height: 1;
	display: inline-flex;
}

.k-crumble-country-preview-code {
	font-size: var(--text-sm);
	color: var(--color-text-dimmed);
	font-family: var(--font-mono);
}
</style>